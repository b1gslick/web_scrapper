name: Ansible

on:
  [push]
  # branches:
  # - main

jobs:
  run_docker_compose:
    name: Ansible
    runs-on: ubuntu-latest
    steps:
      - name: Run playbook
        uses: dawidd6/action-ansible-playbook@v2
        with:
          # Required, playbook filepath
          playbook: "deploy.yml"
          # Optional, directory where playbooks live
          # directory: "/home/runner/work/web_scrapper/web_scrapper/.github/workflows/playbooks/"
          # Optional, SSH private key
          # key: ${{secrets.SSH_PRIVATE_KEY}}
          # Optional, literal inventory file contents
          inventory: |
            [server]
            {{ lookup('ansible.builtin.env', 'UBUNTU_URL_SSH') }} ansible_user=ubuntu ansible_ssh_private_key_file={{ lookup('ansible.builtin.env', 'UBUNTU_PRIVATE_KEY') }}

      #   [group1]
      #   example.com
      # Optional, SSH known hosts file content
      # known_hosts: |
      #   example.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOMqqnkVzrm0SdG6UOoqKLsabgH5C9okWi0dh2l9GKJl
      # Optional, encrypted vault password
      # vault_password: ${{secrets.VAULT_PASSWORD}}
      # Optional, galaxy requirements filepath
      # requirements: galaxy-requirements.yml
      # Optional, additional flags to pass to ansible-playbook
      # options: |
      #   --inventory .hosts
      #   --limit group1
      #   --extra-vars hello=there
      #   --verbose
